<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸€ì ìŠ¬ë¼ì„ ëƒ ëƒ ì´ í‚¤ìš°ê¸°</title>
    
    <!-- 1. Tailwind CSS (ìŠ¤íƒ€ì¼ë§) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React & ReactDOM (ë¦¬ì•¡íŠ¸ ì½”ì–´) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. Babel (JSX ì½”ë“œë¥¼ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€í™˜) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* ì»¤ìŠ¤í…€ ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-15px) rotate(-10deg); }
            75% { transform: translateX(15px) rotate(10deg); }
        }
        .animate-shake { animation: shake 0.5s ease-in-out; }
        
        @keyframes chomp {
            0% { transform: scaleY(1); }
            50% { transform: scaleY(0.2); }
            100% { transform: scaleY(1); }
        }
        .animate-chomp { animation: chomp 0.3s ease-in-out infinite; }

        @keyframes levelUpGlow {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); transform: scale(1); }
            50% { box-shadow: 0 0 50px 20px rgba(255, 255, 255, 0.9); transform: scale(1.2) rotate(360deg); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); transform: scale(1); }
        }
        .animate-levelup { animation: levelUpGlow 2s ease-in-out; }
    </style>
</head>
<body class="bg-amber-50">
    <div id="root"></div>

    <!-- ë¦¬ì•¡íŠ¸ ì½”ë“œ ì‹œì‘ -->
    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ---
        const Play = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="5 3 19 12 5 21 5 3" />
            </svg>
        );

        const Home = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
        );

        const RotateCcw = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                <path d="M3 3v5h5"/>
            </svg>
        );

        const Sparkles = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"/>
                <path d="M5 3v4"/>
                <path d="M9 3v4"/>
                <path d="M2 7h4"/>
                <path d="M2 11h4"/>
            </svg>
        );

        const Heart = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />
            </svg>
        );

        const Crown = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14" />
            </svg>
        );

        const Volume2 = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
            </svg>
        );

        const Music = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9 18V5l12-2v13" />
            </svg>
        );

        const Music2 = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="8" cy="18" r="4"/>
                <path d="M12 18V2l7 4"/>
            </svg>
        );
        
        const Wrench = (props) => (
             <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
            </svg>
        );


        // --- [1. ê²Œì„ ë°ì´í„°ë² ì´ìŠ¤] ---
        const DATA_POOL = {
          level1: [ 
            { id: '1-1', prompt: "'ë©ë©' ì§–ëŠ” ë™ë¬¼ì€?", answer: "ê°•ì•„ì§€", options: ["ê°•ì•„ì§€", "ê³ ì–‘ì´", "ë³‘ì•„ë¦¬"] },
            { id: '1-2', prompt: "'ì•¼ì˜¹' ìš°ëŠ” ë™ë¬¼ì€?", answer: "ê³ ì–‘ì´", options: ["ê³ ì–‘ì´", "ê°•ì•„ì§€", "í˜¸ë‘ì´"] },
            { id: '1-3', prompt: "'ê¿€ê¿€' ì†Œë¦¬ ë‚´ëŠ” ë™ë¬¼!", answer: "ë¼ì§€", options: ["ë¼ì§€", "ì†Œ", "ë§"] },
            { id: '1-4', prompt: "'ê¹¡ì¶©ê¹¡ì¶©' ë›°ëŠ” ë™ë¬¼?", answer: "í† ë¼", options: ["í† ë¼", "ê±°ë¶ì´", "ì‚¬ì"] },
            { id: '1-5', prompt: "'ì—‰ê¸ˆì—‰ê¸ˆ' ê¸°ì–´ê°€ëŠ” ë™ë¬¼!", answer: "ê±°ë¶ì´", options: ["ê±°ë¶ì´", "í† ë¼", "ë±€"] },
            { id: '1-6', prompt: "í•˜ëŠ˜ì„ 'ìŠˆì›…' ë‚ ì•„ìš”!", answer: "ë¹„í–‰ê¸°", options: ["ë¹„í–‰ê¸°", "ìë™ì°¨", "ë°°"] },
            { id: '1-7', prompt: "ê¸°ì°»ê¸¸ì„ 'ì¹™ì¹™í­í­'!", answer: "ê¸°ì°¨", options: ["ê¸°ì°¨", "ìì „ê±°", "ë²„ìŠ¤"] },
            { id: '1-8', prompt: "'ì‚ë½€ì‚ë½€' ì•„í”ˆ ì‚¬ëŒ ë„ì™€ì¤˜ìš”!", answer: "êµ¬ê¸‰ì°¨", options: ["êµ¬ê¸‰ì°¨", "ê²½ì°°ì°¨", "ì†Œë°©ì°¨"] },
            { id: '1-9', prompt: "'ì• ì•µì• ì•µ' ë¶ˆì„ êº¼ì¤˜ìš”!", answer: "ì†Œë°©ì°¨", options: ["ì†Œë°©ì°¨", "êµ¬ê¸‰ì°¨", "íƒì‹œ"] },
            { id: '1-10', prompt: "ë§›ìˆëŠ” 'ë¹¨ê°„ìƒ‰' ê³¼ì¼!", answer: "ì‚¬ê³¼", options: ["ì‚¬ê³¼", "ë°”ë‚˜ë‚˜", "í¬ë„"] },
            { id: '1-11', prompt: "ê¸¸ì­‰ê¸¸ì­‰ 'ë…¸ë€ìƒ‰' ê³¼ì¼!", answer: "ë°”ë‚˜ë‚˜", options: ["ë°”ë‚˜ë‚˜", "ì‚¬ê³¼", "ìˆ˜ë°•"] },
            { id: '1-12', prompt: "ë¹„ê°€ ì˜¬ ë•Œ 'í™œì§' í¼ì³ìš”!", answer: "ìš°ì‚°", options: ["ìš°ì‚°", "ëª¨ì", "ê°€ë°©"] },
            { id: '1-13', prompt: "ë°œì— 'ì™' ì‹ ì–´ìš”!", answer: "ì‹ ë°œ", options: ["ì‹ ë°œ", "ì¥ê°‘", "ëª¨ì"] },
            { id: '1-14', prompt: "ë¨¸ë¦¬ì— 'í­' ì¨ìš”!", answer: "ëª¨ì", options: ["ëª¨ì", "ì–‘ë§", "ë°”ì§€"] },
            { id: '1-15', prompt: "ì†ì„ 'ë½€ë“ë½€ë“' ì”»ì–´ìš”!", answer: "ë¹„ëˆ„", options: ["ë¹„ëˆ„", "ì¹˜ì•½", "ìƒ´í‘¸"] },
            { id: '1-16', prompt: "ì´ë¥¼ 'ì¹˜ì¹´ì¹˜ì¹´' ë‹¦ì•„ìš”!", answer: "ì¹«ì†”", options: ["ì¹«ì†”", "ë¹„ëˆ„", "ìˆ˜ê±´"] },
            { id: '1-17', prompt: "ë°¤ì— 'ì¿¨ì¿¨' ììš”!", answer: "ì¹¨ëŒ€", options: ["ì¹¨ëŒ€", "ì±…ìƒ", "ì˜ì"] },
            { id: '1-18', prompt: "ì±…ì„ 'ë°˜ë“¯í•˜ê²Œ' í´ìš”!", answer: "ì±…ìƒ", options: ["ì±…ìƒ", "ì¹¨ëŒ€", "ëƒ‰ì¥ê³ "] },
            { id: '1-19', prompt: "í…”ë ˆë¹„ì „ì„ ë³´ëŠ” ê³³!", answer: "ê±°ì‹¤", options: ["ê±°ì‹¤", "ë¶€ì—Œ", "í™”ì¥ì‹¤"] },
            { id: '1-20', prompt: "ìŒì‹ì„ 'ë³´ê¸€ë³´ê¸€' ìš”ë¦¬í•´ìš”!", answer: "ë¶€ì—Œ", options: ["ë¶€ì—Œ", "ì•ˆë°©", "í˜„ê´€"] },
          ],
          level2: [ 
            { id: '2-1', prompt: "ì•„ì´ìŠ¤í¬ë¦¼ì€ 'ì°¨ê°‘ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ëœ¨ê²ë‹¤", options: ["ëœ¨ê²ë‹¤", "ì‘ë‹¤", "ë©€ë‹¤"] },
            { id: '2-2', prompt: "ì½”ë¼ë¦¬ëŠ” 'í¬ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ì‘ë‹¤", options: ["ë§ë‹¤", "ì‘ë‹¤", "ë†’ë‹¤"] },
            { id: '2-3', prompt: "ê¸°ì°¨ëŠ” 'ê¸¸ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ì§§ë‹¤", options: ["ë„“ë‹¤", "ì§§ë‹¤", "ë¬´ê²ë‹¤"] },
            { id: '2-4', prompt: "ì‚¬íƒ•ì´ 'ë§ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ì ë‹¤", options: ["ì ë‹¤", "í¬ë‹¤", "ë†’ë‹¤"] },
            { id: '2-5', prompt: "ë¹„í–‰ê¸°ëŠ” 'ë†’ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë‚®ë‹¤", options: ["ê¹Šë‹¤", "ë‚®ë‹¤", "ë©€ë‹¤"] },
            { id: '2-6', prompt: "ê±°ë¶ì´ëŠ” 'ëŠë¦¬ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë¹ ë¥´ë‹¤", options: ["ë¹ ë¥´ë‹¤", "ì•½í•˜ë‹¤", "ìˆœí•˜ë‹¤"] },
            { id: '2-7', prompt: "ê¹ƒí„¸ì€ 'ê°€ë³ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë¬´ê²ë‹¤", options: ["ë¬´ê²ë‹¤", "ì–´ë‘¡ë‹¤", "ì¦ê²ë‹¤"] },
            { id: '2-8', prompt: "ë°¤ì€ 'ì–´ë‘¡ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë°ë‹¤", options: ["ë°ë‹¤", "ê²€ë‹¤", "ë¶‰ë‹¤"] },
            { id: '2-9', prompt: "ëŒë©©ì´ëŠ” 'ë”±ë”±í•˜ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë§ë‘í•˜ë‹¤", options: ["ë§ë‘í•˜ë‹¤", "ë‹¨ë‹¨í•˜ë‹¤", "ë¾°ì¡±í•˜ë‹¤"] },
            { id: '2-10', prompt: "ì„ ë¬¼ ë°›ì•„ì„œ 'ê¸°ì˜ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ìŠ¬í”„ë‹¤", options: ["í™”ë‚˜ë‹¤", "ìŠ¬í”„ë‹¤", "ì¡¸ë¦¬ë‹¤"] },
            { id: '2-11', prompt: "ê²¨ìš¸ì€ 'ì¶¥ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë¥ë‹¤", options: ["ë¥ë‹¤", "ì‹œì›í•˜ë‹¤", "ë”°ëœ»í•˜ë‹¤"] },
            { id: '2-12', prompt: "ì†ì´ 'ê¹¨ë—í•˜ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë”ëŸ½ë‹¤", options: ["ë”ëŸ½ë‹¤", "ë§‘ë‹¤", "ì˜ˆì˜ë‹¤"] },
            { id: '2-13', prompt: "ì´ ë¬¸ì œëŠ” 'ì‰½ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ì–´ë µë‹¤", options: ["ì–´ë µë‹¤", "ì¬ë°Œë‹¤", "ì§€ë£¨í•˜ë‹¤"] },
            { id: '2-14', prompt: "'ì•'ìœ¼ë¡œ ê°€ì! ë°˜ëŒ€ëŠ”?", answer: "ë’¤", options: ["ì˜†", "ìœ„", "ë’¤"] },
            { id: '2-15', prompt: "'ìœ„'ë¥¼ ë´! ë°˜ëŒ€ëŠ”?", answer: "ì•„ë˜", options: ["ì•„ë˜", "ì‚¬ì´", "ê°€ìš´ë°"] },
            { id: '2-16', prompt: "ì§‘ 'ì•ˆ'ì— ìˆì–´! ë°˜ëŒ€ëŠ”?", answer: "ë°–", options: ["ë°–", "ì†", "ê²‰"] },
            { id: '2-17', prompt: "í•™êµì— 'ê°€ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ì˜¤ë‹¤", options: ["ì˜¤ë‹¤", "ìë‹¤", "ë†€ë‹¤"] },
            { id: '2-18', prompt: "ìë¦¬ì— 'ì„œë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ì•‰ë‹¤", options: ["ì•‰ë‹¤", "ëˆ•ë‹¤", "ê±·ë‹¤"] },
            { id: '2-19', prompt: "ë¬¸ì„ 'ì—´ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë‹«ë‹¤", options: ["ë‹«ë‹¤", "ê¹¨ë‹¤", "ë°€ë‹¤"] },
            { id: '2-20', prompt: "ì¥ë‚œê°ì„ 'ë°€ë‹¤'! ë°˜ëŒ€ëŠ”?", answer: "ë‹¹ê¸°ë‹¤", options: ["ì¡ë‹¤", "ë†“ë‹¤", "ë‹¹ê¸°ë‹¤"] },
          ],
          level3: [ 
            { id: '3-1', prompt: "'ë‚˜ë¹„ê°€' íŒ”ë‘íŒ”ë‘~", answer: "ë‚ ì•„ìš”", options: ["ë‚ ì•„ìš”", "í—¤ì—„ì³ìš”", "êµ´ëŸ¬ê°€ìš”"] },
            { id: '3-2', prompt: "'ë¬¼ê³ ê¸°ê°€' ë¬¼ì†ì—ì„œ~", answer: "í—¤ì—„ì³ìš”", options: ["ê±¸ì–´ìš”", "í—¤ì—„ì³ìš”", "ë‚ ì•„ìš”"] },
            { id: '3-3', prompt: "'ì•„ê¸°ê°€' ì‘ì• ì‘ì• !", answer: "ìš¸ì–´ìš”", options: ["ìš¸ì–´ìš”", "ì›ƒì–´ìš”", "ììš”"] },
            { id: '3-4', prompt: "'ìƒˆê°€' ì§¹ì§¹ì§¹!", answer: "ë…¸ë˜í•´ìš”", options: ["ê¸°ì–´ìš”", "ë…¸ë˜í•´ìš”", "ë›°ì–´ìš”"] },
            { id: '3-5', prompt: "'ê°œêµ¬ë¦¬ê°€' í´ì§!", answer: "ë›°ì–´ìš”", options: ["ììš”", "ë›°ì–´ìš”", "ë¨¹ì–´ìš”"] },
            { id: '3-6', prompt: "'ë°”ëŒì´' ìŒ©ìŒ©~", answer: "ë¶ˆì–´ìš”", options: ["ë¶ˆì–´ìš”", "ë©ˆì¶°ìš”", "ì‚¬ë¼ì ¸ìš”"] },
            { id: '3-7', prompt: "'ê½ƒì´' ì˜ˆì˜ê²Œ~", answer: "í”¼ì–´ìš”", options: ["ì ¸ìš”", "í”¼ì–´ìš”", "ì£½ì–´ìš”"] },
            { id: '3-8', prompt: "'ë¹„ê°€' ì£¼ë£©ì£¼ë£©~", answer: "ë‚´ë ¤ìš”", options: ["ì˜¬ë¼ê°€ìš”", "ë‚´ë ¤ìš”", "ëŒì•„ìš”"] },
            { id: '3-9', prompt: "'í•´ê°€' ì•„ì¹¨ì—~", answer: "ë–´ì–´ìš”", options: ["ì¡Œì–´ìš”", "ë–´ì–´ìš”", "ìˆ¨ì—ˆì–´ìš”"] },
            { id: '3-10', prompt: "'ì‚¬ê³¼ë¥¼' ëƒ ëƒ !", answer: "ë¨¹ì–´ìš”", options: ["ë¨¹ì–´ìš”", "ë§ˆì…”ìš”", "ì…ì–´ìš”"] },
            { id: '3-11', prompt: "'ìš°ìœ ë¥¼' ê¿€êº½ê¿€êº½!", answer: "ë§ˆì…”ìš”", options: ["ì”¹ì–´ìš”", "ë§ˆì…”ìš”", "ë˜ì ¸ìš”"] },
            { id: '3-12', prompt: "'ê³µì„' ë»¥!", answer: "ì°¨ìš”", options: ["ì°¨ìš”", "ë¨¹ì–´ìš”", "ì…ì–´ìš”"] },
            { id: '3-13', prompt: "'ê·¸ë¦¼ì„' ì“±ì“±!", answer: "ê·¸ë ¤ìš”", options: ["ì§€ì›Œìš”", "ê·¸ë ¤ìš”", "ë¶€ìˆ´ìš”"] },
            { id: '3-14', prompt: "'ë…¸ë˜ë¥¼' ë„ë„ë¼~", answer: "ë¶ˆëŸ¬ìš”", options: ["ë“¤ì–´ìš”", "ë¶ˆëŸ¬ìš”", "ë´ìš”"] },
            { id: '3-15', prompt: "'ì±…ì„' ì¬ë¯¸ìˆê²Œ~", answer: "ì½ì–´ìš”", options: ["ì½ì–´ìš”", "ì°¢ì–´ìš”", "ë®ì–´ìš”"] },
            { id: '3-16', prompt: "'ì˜·ì„' ì˜ˆì˜ê²Œ~", answer: "ì…ì–´ìš”", options: ["ë²—ì–´ìš”", "ì…ì–´ìš”", "ì ‘ì–´ìš”"] },
            { id: '3-17', prompt: "'ì‹ ë°œì„' ì‹ ê³ ~", answer: "ì‹ ì–´ìš”", options: ["ì‹ ì–´ìš”", "ì¨ìš”", "ê»´ìš”"] },
            { id: '3-18', prompt: "'ì ì„' ì¿¨ì¿¨~", answer: "ììš”", options: ["ììš”", "ê¹¨ìš”", "ë†€ì•„ìš”"] },
            { id: '3-19', prompt: "'ì¹œêµ¬ì™€' ì‚¬ì´ì¢‹ê²Œ~", answer: "ë†€ì•„ìš”", options: ["ë†€ì•„ìš”", "ì‹¸ì›Œìš”", "ë°€ì–´ìš”"] },
            { id: '3-20', prompt: "'ì „í™”ë¥¼' ì—¬ë³´ì„¸ìš”?", answer: "ë°›ì•„ìš”", options: ["ë°›ì•„ìš”", "ê±¸ì–´ìš”", "ëŠì–´ìš”"] },
          ]
        };

        const MONSTER_STYLES = {
          1: { size: 'w-32 h-32', color: 'bg-green-300', eye: 'w-4 h-4', label: 'ì•„ê¸° ëƒ ëƒ ì´' },
          2: { size: 'w-48 h-48', color: 'bg-blue-400', eye: 'w-6 h-6', label: 'ì–´ë¦°ì´ ëƒ ëƒ ì´' },
          3: { size: 'w-64 h-64', color: 'bg-purple-500', eye: 'w-8 h-8', label: 'ì–´ë¥¸ ëƒ ëƒ ì´' }
        };

        const shuffleArray = (array) => {
          const newArray = [...array];
          for (let i = newArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
          }
          return newArray;
        };

        const shuffleOptions = (question) => {
          return {
            ...question,
            options: shuffleArray(question.options)
          };
        };

        // --- ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸ ---
        function WordTamagotchi() {
          const [gameState, setGameState] = useState('menu'); 
          const [gameQuestions, setGameQuestions] = useState([]);
          const [currentIdx, setCurrentIdx] = useState(0);
          const [level, setLevel] = useState(1);
          const [exp, setExp] = useState(0); 
          const maxExpPerLevel = 20; 

          const [monsterState, setMonsterState] = useState('idle'); 
          const [swallowedWord, setSwallowedWord] = useState('');
          const [wrongWord, setWrongWord] = useState(null);
          
          // ìŒì•… ë° ë””ë²„ê¹… ìƒíƒœ
          const [isMusicPlaying, setIsMusicPlaying] = useState(false);
          const [showDebug, setShowDebug] = useState(false);
          const [audioPath, setAudioPath] = useState('music/bgm.mp3'); // ê¸°ë³¸ ê²½ë¡œ
          const [audioLog, setAudioLog] = useState([]);
          const audioRef = useRef(null);

          // ë¡œê·¸ í—¬í¼
          const addLog = (msg) => {
             const time = new Date().toLocaleTimeString();
             setAudioLog(prev => [`[${time}] ${msg}`, ...prev].slice(0, 5));
          };

          // ì˜¤ë””ì˜¤ ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
          useEffect(() => {
            const audio = new Audio();
            audioRef.current = audio;
            audio.loop = true;
            audio.volume = 0.3;
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            const handleCanPlay = () => addLog("ì˜¤ë””ì˜¤ ì¤€ë¹„ ì™„ë£Œ (canplay)");
            const handleError = (e) => {
                let errorMsg = "ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬";
                if (audio.error) {
                    switch (audio.error.code) {
                        case 1: errorMsg = "ì‚¬ìš©ìê°€ ì¤‘ë‹¨í•¨ (MEDIA_ERR_ABORTED)"; break;
                        case 2: errorMsg = "ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ (MEDIA_ERR_NETWORK)"; break;
                        case 3: errorMsg = "ë””ì½”ë”© ì—ëŸ¬ (MEDIA_ERR_DECODE)"; break;
                        case 4: errorMsg = "ì†ŒìŠ¤ ì§€ì› ì•ˆí•¨/ê²½ë¡œ í‹€ë¦¼ (MEDIA_ERR_SRC_NOT_SUPPORTED)"; break;
                    }
                }
                addLog(`ì—ëŸ¬ ë°œìƒ: ${errorMsg}`);
                setIsMusicPlaying(false);
            };
            const handlePlay = () => {
                addLog("ì¬ìƒ ì‹œì‘");
                setIsMusicPlaying(true);
            };
            const handlePause = () => {
                addLog("ì¼ì‹œ ì •ì§€");
                setIsMusicPlaying(false);
            };

            audio.addEventListener('canplay', handleCanPlay);
            audio.addEventListener('error', handleError);
            audio.addEventListener('play', handlePlay);
            audio.addEventListener('pause', handlePause);

            return () => {
                audio.removeEventListener('canplay', handleCanPlay);
                audio.removeEventListener('error', handleError);
                audio.removeEventListener('play', handlePlay);
                audio.removeEventListener('pause', handlePause);
                audio.pause();
                audioRef.current = null;
            };
          }, []);

          // ì˜¤ë””ì˜¤ ê²½ë¡œ ë³€ê²½ ì‹œ ì ìš©
          useEffect(() => {
              if(audioRef.current) {
                  addLog(`ê²½ë¡œ ì„¤ì •: ${audioPath}`);
                  audioRef.current.src = audioPath;
                  // ê²½ë¡œ ë³€ê²½ í›„ ìë™ ì¬ìƒí•˜ì§€ ì•ŠìŒ (ë¸Œë¼ìš°ì € ì •ì±… ì¤€ìˆ˜)
                  setIsMusicPlaying(false);
              }
          }, [audioPath]);

          const toggleMusic = () => {
            if (!audioRef.current) return;
            
            if (isMusicPlaying) {
              audioRef.current.pause();
            } else {
              // ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­) ë‚´ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ ì¬ìƒ ê°€ëŠ¥ì„± ë†’ìŒ
              const playPromise = audioRef.current.play();
              if (playPromise !== undefined) {
                playPromise.catch(error => {
                  addLog(`ì¬ìƒ ì‹¤íŒ¨: ${error.name}`);
                  console.error("Audio play failed:", error);
                });
              }
            }
          };

          const changePath = (newPath) => {
              setAudioPath(newPath);
          };

          const prepareGameData = (startLevel) => {
            let questions = [];
            if (startLevel === 1) {
                questions = [...shuffleArray(DATA_POOL.level1), ...shuffleArray(DATA_POOL.level2), ...shuffleArray(DATA_POOL.level3)];
            } else if (startLevel === 2) {
                questions = [...shuffleArray(DATA_POOL.level2), ...shuffleArray(DATA_POOL.level3)];
            } else {
                questions = [...shuffleArray(DATA_POOL.level3)];
            }
            return questions.map(shuffleOptions);
          };

          const speakWord = useCallback((text) => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
              const utterance = new SpeechSynthesisUtterance(text);
              utterance.lang = 'ko-KR';
              utterance.rate = 0.85; 
              utterance.pitch = level === 1 ? 1.4 : (level === 2 ? 1.1 : 0.9);
              window.speechSynthesis.speak(utterance);
            }
          }, [level]);

          const playSound = useCallback((type) => {
            try {
              const ctx = new (window.AudioContext || window.webkitAudioContext)();
              const osc = ctx.createOscillator();
              const gainNode = ctx.createGain();
              osc.connect(gainNode);
              gainNode.connect(ctx.destination);
              
              if (type === 'eat') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(400, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(800, ctx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.2, ctx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
                osc.start();
                osc.stop(ctx.currentTime + 0.1);
              } else if (type === 'happy') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(523.25, ctx.currentTime);
                osc.frequency.setValueAtTime(659.25, ctx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.1, ctx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
                osc.start();
                osc.stop(ctx.currentTime + 0.3);
              } else if (type === 'levelup') {
                osc.type = 'square';
                osc.frequency.setValueAtTime(440, ctx.currentTime);
                osc.frequency.setValueAtTime(554, ctx.currentTime + 0.1);
                osc.frequency.setValueAtTime(659, ctx.currentTime + 0.2);
                osc.frequency.setValueAtTime(880, ctx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.1, ctx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.6);
                osc.start();
                osc.stop(ctx.currentTime + 0.6);
              }
            } catch (e) {
              console.log("Audio API not supported");
            }
          }, []);

          const startGame = (startLevel) => {
            const questions = prepareGameData(startLevel);
            setGameQuestions(questions);
            setCurrentIdx(0);
            setLevel(startLevel);
            setExp(0);
            setMonsterState('idle');
            setGameState('playing');
          };

          const handleFeed = (selectedWord) => {
            if (monsterState !== 'idle' && monsterState !== 'sad') return;
            
            speakWord(selectedWord);
            const currentData = gameQuestions[currentIdx];
            
            if (selectedWord === currentData.answer) {
              setMonsterState('eating');
              setSwallowedWord(selectedWord);
              playSound('eat');
              
              setTimeout(() => {
                setMonsterState('happy');
                playSound('happy');
                setSwallowedWord('');
                
                const newExp = exp + 1;
                setExp(newExp);

                setTimeout(() => {
                  if (newExp >= maxExpPerLevel) {
                    handleLevelUp();
                  } else {
                    nextQuestion();
                  }
                }, 1500);

              }, 600); 

            } else {
              setMonsterState('sad');
              setWrongWord(selectedWord);
              setTimeout(() => {
                setMonsterState('idle');
                setWrongWord(null);
              }, 800);
            }
          };

          const handleLevelUp = () => {
            if (level === 3) {
              setGameState('clear');
              speakWord("ì¶•í•˜í•´ìš”! ëƒ ëƒ ì´ê°€ ì™•ê´€ì„ ì¼ì–´ìš”!");
              return;
            }
            
            setMonsterState('levelup');
            playSound('levelup');
            speakWord(level === 1 ? "ëƒ ëƒ ì´ê°€ ì–´ë¦°ì´ê°€ ë˜ì—ˆì–´ìš”!" : "ì™€ì•„! ëƒ ëƒ ì´ê°€ ë‹¤ ì»¸ì–´ìš”!");
            
            setTimeout(() => {
              setLevel(prev => prev + 1);
              setExp(0);
              setMonsterState('idle');
              nextQuestion(true);
            }, 2500);
          };

          const nextQuestion = (isAfterLevelUp = false) => {
            const nextIdx = currentIdx + 1;
            if (nextIdx < gameQuestions.length) {
              setCurrentIdx(nextIdx);
              setMonsterState('idle');
            }
          };

          // --- UI ë Œë”ë§ í—¬í¼ ---
          // ìŒì•… ë²„íŠ¼ê³¼ ë””ë²„ê·¸ ë²„íŠ¼ì€ í•­ìƒ í‘œì‹œ
          const renderOverlayControls = () => (
             <>
                <div className="absolute top-6 right-6 flex gap-2 z-50">
                    <button 
                      onClick={toggleMusic}
                      className={`p-3 rounded-full shadow-md transition-all ${isMusicPlaying ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-400 hover:bg-gray-200'}`}
                      title="ìŒì•… ì¼œê¸°/ë„ê¸°"
                    >
                      {isMusicPlaying ? <Music /> : <Music2 />}
                    </button>
                    <button 
                      onClick={() => setShowDebug(!showDebug)}
                      className={`p-3 rounded-full shadow-md transition-all ${showDebug ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-400 hover:bg-gray-200'}`}
                      title="ë””ë²„ê¹… íŒ¨ë„"
                    >
                      <Wrench />
                    </button>
                </div>
                
                {showDebug && (
                    <div className="absolute bottom-4 right-4 bg-black/80 text-white p-4 rounded-xl text-xs z-50 w-64 shadow-2xl backdrop-blur-sm">
                        <h3 className="font-bold text-yellow-400 mb-2 border-b border-gray-600 pb-1">ğŸ”§ ì˜¤ë””ì˜¤ ë””ë²„ê±°</h3>
                        <div className="mb-2">
                            <span className="text-gray-400">ìƒíƒœ: </span>
                            <span className={isMusicPlaying ? "text-green-400" : "text-red-400"}>
                                {isMusicPlaying ? "ì¬ìƒ ì¤‘" : "ì •ì§€ë¨"}
                            </span>
                        </div>
                        <div className="mb-2">
                            <span className="text-gray-400">í˜„ì¬ ê²½ë¡œ: </span>
                            <div className="text-blue-300 break-all">{audioPath}</div>
                        </div>
                        <div className="mb-2">
                            <div className="text-gray-400 mb-1">ê²½ë¡œ í…ŒìŠ¤íŠ¸:</div>
                            <div className="flex flex-wrap gap-1">
                                <button onClick={() => changePath('music/bgm.mp3')} className="bg-gray-700 px-2 py-1 rounded hover:bg-gray-600">music/...</button>
                                <button onClick={() => changePath('public/music/bgm.mp3')} className="bg-gray-700 px-2 py-1 rounded hover:bg-gray-600">public/...</button>
                                <button onClick={() => changePath('./music/bgm.mp3')} className="bg-gray-700 px-2 py-1 rounded hover:bg-gray-600">./music...</button>
                            </div>
                        </div>
                        <div className="border-t border-gray-600 pt-2 mt-2">
                            <div className="text-gray-400 mb-1">ë¡œê·¸:</div>
                            <div className="max-h-24 overflow-y-auto text-gray-300 font-mono">
                                {audioLog.map((log, i) => <div key={i}>{log}</div>)}
                            </div>
                        </div>
                    </div>
                )}
             </>
          );

          if (gameState === 'menu') {
            return (
              <div className="flex flex-col items-center justify-center min-h-screen font-sans p-6 rounded-2xl relative">
                {renderOverlayControls()}

                <div className="w-32 h-32 bg-green-300 rounded-full flex flex-col items-center justify-center mb-6 animate-bounce shadow-lg">
                  <div className="flex space-x-3 mb-2"><div className="w-4 h-4 bg-gray-800 rounded-full"></div><div className="w-4 h-4 bg-gray-800 rounded-full"></div></div>
                  <div className="w-10 h-4 bg-gray-800 rounded-b-full"></div>
                </div>
                <h1 className="text-4xl md:text-5xl font-extrabold text-gray-800 mb-4 tracking-tight">ê¸€ì ê´´ë¬¼ <span className="text-green-500">ëƒ ëƒ ì´</span></h1>
                <p className="text-lg text-gray-600 mb-10 font-medium">ë‹¨ì–´ë¥¼ ë¨¹ê³  ë¬´ëŸ­ë¬´ëŸ­ ìë¼ë‚˜ìš”!</p>
                
                <button 
                  onClick={() => setGameState('levelSelect')}
                  className="px-10 py-5 bg-green-500 text-white rounded-full font-bold text-2xl hover:bg-green-600 transition-all shadow-xl active:scale-95 flex items-center space-x-2"
                >
                  <Play fill="currentColor" />
                  <span>ê²Œì„ ì‹œì‘</span>
                </button>
              </div>
            );
          }

          if (gameState === 'levelSelect') {
            return (
                <div className="flex flex-col items-center justify-center min-h-screen font-sans p-6 rounded-2xl relative">
                    {renderOverlayControls()}
                    <h2 className="text-3xl font-extrabold text-gray-800 mb-8">ì–´ë–¤ ëƒ ëƒ ì´ë¥¼ í‚¤ìš¸ê¹Œìš”?</h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl">
                        <button 
                            onClick={() => startGame(1)}
                            className="flex flex-col items-center p-6 bg-white rounded-3xl border-4 border-green-200 hover:border-green-400 hover:bg-green-50 transition-all shadow-md active:scale-95"
                        >
                            <div className="w-20 h-20 bg-green-300 rounded-full mb-4 shadow-sm" />
                            <span className="text-xl font-bold text-gray-700">1ë‹¨ê³„: ì†Œë¦¬ì™€ ë‹¨ì–´</span>
                            <span className="text-sm text-gray-500 mt-2">"ë©ë©" â†’ ê°•ì•„ì§€</span>
                        </button>

                        <button 
                            onClick={() => startGame(2)}
                            className="flex flex-col items-center p-6 bg-white rounded-3xl border-4 border-blue-200 hover:border-blue-400 hover:bg-blue-50 transition-all shadow-md active:scale-95"
                        >
                            <div className="w-24 h-24 bg-blue-400 rounded-full mb-4 shadow-sm" />
                            <span className="text-xl font-bold text-gray-700">2ë‹¨ê³„: ë°˜ëŒ€ë§</span>
                            <span className="text-sm text-gray-500 mt-2">"í¬ë‹¤" â†’ ì‘ë‹¤</span>
                        </button>

                        <button 
                            onClick={() => startGame(3)}
                            className="flex flex-col items-center p-6 bg-white rounded-3xl border-4 border-purple-200 hover:border-purple-400 hover:bg-purple-50 transition-all shadow-md active:scale-95"
                        >
                            <div className="w-28 h-28 bg-purple-500 rounded-full mb-4 shadow-sm" />
                            <span className="text-xl font-bold text-gray-700">3ë‹¨ê³„: ë¬¸ì¥ ì™„ì„±</span>
                            <span className="text-sm text-gray-500 mt-2">"ë‚˜ë¹„ê°€" â†’ ë‚ ì•„ìš”</span>
                        </button>
                    </div>

                    <button onClick={() => setGameState('menu')} className="mt-10 px-6 py-2 bg-gray-200 rounded-full text-gray-600 font-bold hover:bg-gray-300">
                        ë’¤ë¡œ ê°€ê¸°
                    </button>
                </div>
            );
          }

          if (gameState === 'clear') {
            return (
              <div className="flex flex-col items-center justify-center min-h-screen font-sans p-6 rounded-2xl text-center relative">
                {renderOverlayControls()}
                <Sparkles className="text-purple-400 w-16 h-16 mb-6 animate-spin-slow" />
                
                <div className={`${MONSTER_STYLES[3].size} ${MONSTER_STYLES[3].color} rounded-full flex flex-col items-center justify-center mb-8 shadow-2xl animate-bounce relative`}>
                  <div className="absolute -top-12 animate-pulse">
                    <Crown className="text-yellow-400 fill-yellow-400 drop-shadow-lg w-16 h-16" />
                  </div>
                  <div className="flex space-x-6 mb-4"><div className={`${MONSTER_STYLES[3].eye} bg-gray-800 rounded-full`}></div><div className={`${MONSTER_STYLES[3].eye} bg-gray-800 rounded-full`}></div></div>
                  <div className="w-24 h-12 bg-gray-800 rounded-b-full relative overflow-hidden"><div className="absolute bottom-0 w-full h-4 bg-red-400"></div></div>
                </div>
                
                <h2 className="text-4xl md:text-5xl font-extrabold text-purple-600 mb-6">ëƒ ëƒ ì´ ì™•ì´ ë˜ì—ˆì–´ìš”!</h2>
                <p className="text-xl text-gray-500 mb-8 font-bold">ì°¸ ì˜í–ˆì–´ìš”! ë©‹ì§„ ë‹¨ì–´ ë§ˆë²•ì‚¬ë‹˜!</p>
                <button 
                  onClick={() => setGameState('menu')}
                  className="flex items-center space-x-2 px-8 py-4 bg-gray-800 text-white rounded-full font-bold text-xl hover:bg-gray-700 transition-colors shadow-lg active:scale-95"
                >
                  <RotateCcw size={24} />
                  <span>ë‹¤ì‹œ í‚¤ìš°ê¸°</span>
                </button>
              </div>
            );
          }

          const currentData = gameQuestions[currentIdx];
          const style = MONSTER_STYLES[level];
          const progressPercent = (exp / maxExpPerLevel) * 100;

          return (
            <div className="flex flex-col min-h-screen font-sans p-4 rounded-2xl relative overflow-hidden">
              <div className="flex justify-between items-center bg-white p-4 rounded-3xl shadow-sm z-10">
                <div className="flex flex-col w-full mr-4">
                  <div className="flex justify-between items-end mb-1">
                    <span className="text-sm font-bold text-gray-500">{style.label} (Lv.{level})</span>
                    <span className="text-xs font-bold text-gray-400">{exp} / {maxExpPerLevel}</span>
                  </div>
                  <div className="w-full h-3 bg-gray-200 rounded-full overflow-hidden">
                    <div 
                      className="h-full bg-green-400 transition-all duration-500 ease-out"
                      style={{ width: `${progressPercent}%` }}
                    />
                  </div>
                </div>
                <button onClick={() => setGameState('menu')} className="p-2 bg-gray-100 rounded-full hover:bg-gray-200 flex-shrink-0">
                  <Home className="text-gray-600" size={24} />
                </button>
              </div>
              
              {renderOverlayControls()}

              <div className="flex-1 flex flex-col items-center justify-center w-full relative">
                <div 
                  onClick={() => speakWord(currentData.prompt)}
                  className={`
                    cursor-pointer active:scale-95
                    mb-8 bg-white px-6 py-4 rounded-3xl rounded-br-none shadow-md border-2 border-gray-100 
                    transition-all duration-300 hover:border-green-300 hover:shadow-lg group
                    ${monsterState === 'levelup' ? 'opacity-0' : 'opacity-100'}
                  `}
                >
                  <div className="flex items-center justify-center space-x-2">
                    <p className="text-2xl md:text-3xl font-bold text-gray-800 text-center break-keep">
                      {monsterState === 'happy' ? "ìš°ì™€! ê¿€ë§›ì´ì•¼!" : currentData.prompt}
                    </p>
                    {monsterState !== 'happy' && (
                      <Volume2 className="text-gray-400 group-hover:text-green-500 transition-colors" size={24} />
                    )}
                  </div>
                </div>

                <div className={`
                  relative transition-all duration-700 ease-in-out rounded-full flex flex-col items-center justify-center shadow-xl
                  ${style.size} ${style.color}
                  ${monsterState === 'sad' ? 'animate-shake bg-gray-400' : ''}
                  ${monsterState === 'happy' ? 'animate-bounce' : ''}
                  ${monsterState === 'levelup' ? 'animate-levelup bg-yellow-300' : ''}
                `}>
                  {level === 3 && monsterState === 'happy' && (
                    <div className="absolute -top-10 animate-bounce transition-opacity duration-500">
                      <Crown className="text-yellow-400 fill-yellow-400 drop-shadow-md w-12 h-12" />
                    </div>
                  )}

                  <div className={`flex transition-all duration-300 ${level === 1 ? 'space-x-3' : level === 2 ? 'space-x-5' : 'space-x-8'} mb-2`}>
                    {monsterState === 'happy' ? (
                      <>
                        <div className="text-gray-800 font-bold text-2xl md:text-4xl">^</div>
                        <div className="text-gray-800 font-bold text-2xl md:text-4xl">^</div>
                      </>
                    ) : monsterState === 'sad' ? (
                      <>
                        <div className="text-gray-800 font-bold text-2xl md:text-4xl">{'>'}</div>
                        <div className="text-gray-800 font-bold text-2xl md:text-4xl">{'<'}</div>
                      </>
                    ) : (
                      <>
                        <div className={`${style.eye} bg-gray-800 rounded-full`}></div>
                        <div className={`${style.eye} bg-gray-800 rounded-full`}></div>
                      </>
                    )}
                  </div>

                  <div className={`
                    bg-gray-800 transition-all duration-300 flex items-center justify-center overflow-hidden relative
                    ${monsterState === 'idle' ? 'w-1/3 h-2 rounded-full mt-2' : ''}
                    ${monsterState === 'eating' ? 'w-1/2 h-1/2 rounded-full animate-chomp' : ''}
                    ${monsterState === 'happy' ? 'w-1/2 h-1/3 rounded-b-full mt-1' : ''}
                    ${monsterState === 'sad' ? 'w-1/3 h-2 rounded-t-full mt-4' : ''}
                    ${monsterState === 'levelup' ? 'w-1/2 h-1/3 rounded-b-full mt-1' : ''}
                  `}>
                    {monsterState === 'eating' && swallowedWord && (
                      <span className="text-white font-bold text-xl md:text-3xl absolute animate-ping">{swallowedWord}</span>
                    )}
                    {(monsterState === 'happy' || monsterState === 'levelup') && (
                      <div className="absolute bottom-0 w-3/4 h-1/2 bg-red-400 rounded-t-full"></div>
                    )}
                  </div>
                  
                  {monsterState === 'happy' && (
                    <Heart className="absolute -top-6 -right-4 text-red-500 fill-red-500 animate-bounce w-8 h-8" />
                  )}
                </div>
              </div>

              <div className={`w-full grid grid-cols-1 md:grid-cols-3 gap-4 mt-auto transition-opacity duration-300 ${(monsterState === 'eating' || monsterState === 'levelup') ? 'opacity-0 pointer-events-none' : 'opacity-100'}`}>
                {currentData.options.map((word, index) => {
                  const isWrong = wrongWord === word;
                  return (
                    <button
                      key={`${currentIdx}-${index}`}
                      onClick={() => handleFeed(word)}
                      disabled={monsterState !== 'idle' && monsterState !== 'sad'}
                      className={`
                        relative p-6 rounded-3xl font-bold text-3xl md:text-4xl shadow-md transition-all duration-300
                        bg-white text-gray-700 border-b-8 border-gray-200
                        hover:bg-gray-50 hover:scale-105 active:border-b-0 active:translate-y-2
                        ${isWrong ? 'bg-red-100 text-red-500 border-red-300 animate-shake' : ''}
                      `}
                    >
                      {word}
                    </button>
                  );
                })}
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<WordTamagotchi />);
    </script>
</body>
</html>
